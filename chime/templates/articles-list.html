{% extends "base_new.html" %}

{% set template_name = 'articles-list' %}
{% block body_class %}{{template_name}}{% endblock %}

{% set breadcrumb_items = [{'name': 'Activites', 'url': '/'}] %}

{% block title %}Browse{% endblock %}

{% block content %}

<!-- task: {% if task_description %}{{task_description}}{% elif task %}{{task}}{% else %}{{name}}{% endif %} -->
<!-- beneficiary: {% if task_beneficiary %}{{task_beneficiary}}{% endif %} -->
<!-- template name: {{template_name}} -->

<div class="articles-list__main grid col__flex">
    {% for column in dir_columns %}
    {% if loop.index != 1 or (loop.index == 1 and dir_columns|length == 1) %}
    <div class="dir grid__item {% if loop.index == 4 %}width-one-half{% else %}width-one-fourth{% endif %}">
      {% if loop.index == 2 %}
      <h2>Categories</h2>
      <div class="selection-box box-add-file-folder">
        <form action="." method="POST" class="form-one-line">
            <input class="form-one-line__input" name="path" placeholder="Add Category" type="text" />
            <input name="create_what" value="category" type="hidden" />
            <input name="create_path" value="{{column['path']}}" type="hidden" />
            <input class="form-one-line__submit button" name="action" type="submit" value="Create" />
        </form>
      </div>
      {% elif loop.index == 3 %}
      <h2>Subcategories</h2>
      <div class="selection-box box-add-file-folder">
        <form action="." method="POST" class="form-one-line">
            <input class="form-one-line__input" name="path" placeholder="Add Subcategory" type="text" />
            <input name="create_what" value="category" type="hidden" />
            <input name="create_path" value="{{column['path']}}" type="hidden" />
            <input class="form-one-line__submit button" name="action" type="submit" value="Create" />
        </form>
      </div>
      {% elif loop.index == 4 %}
      <h2>Articles</h2>
      <div class="selection-box box-add-file-folder">
        <form action="." method="POST" class="form-one-line">
            <input class="form-one-line__input" name="path" placeholder="Add Article" type="text" />
            <input name="create_what" value="article" type="hidden" />
            <input name="create_path" value="{{column['path']}}" type="hidden" />
            <input class="form-one-line__submit button" name="action" type="submit" value="Create" />
        </form>
      </div>
      {% endif %}
      <ul class="dir">
        {% for file in column['files'] %}
         <!-- file type: {{file['display_type']}}, file name: {{file['name']}} -->
         <li class="dir-item row {% if file['selected'] == True %}is-selected{% endif %}">
            <a class="dir-item__name {{file['display_type']}} row__left" href="{{file['edit_path']}}">{% if file['display_type'] == "article" %}<span class="fa fa-file-text-o"></span>{% elif file['display_type'] == "category" %}<span class="fa fa-folder-o"></span>{% else %}{% endif %}{{ file['name']  | title | replace('-', ' ') }}</a>
            <div class="dir-item__actions toolbar--right row__right">
              <a href="#"><span class="fa fa-pencil"></span></a>
            </div>
          </li>
        {% endfor %}   
      </ul>
    </div>
    {% endif %}
    {% endfor %}
</div>


{% endblock %}

